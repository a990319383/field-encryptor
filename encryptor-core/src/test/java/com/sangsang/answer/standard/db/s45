SELECT tu1.user_name, tu1.login_name, tu1.login_pwd, CAST(AES_DECRYPT(FROM_BASE64(tu1.phone), '7uq?q8g3@q') AS CHAR) AS phone, tu1.role_id, tu1.id, tu1.create_time, tu1.update_time FROM tb_user tu1 WHERE tu1.phone IN (SELECT TO_BASE64(AES_ENCRYPT(CAST(AES_DECRYPT(FROM_BASE64(tr.role_name), '测试秘钥') AS CHAR), '7uq?q8g3@q')) AS role_name FROM tb_role tr JOIN (SELECT tmp.* FROM (SELECT tb_user.user_name, tb_user.login_name, tb_user.login_pwd, CAST(AES_DECRYPT(FROM_BASE64(tb_user.phone), '7uq?q8g3@q') AS CHAR) AS phone, tb_user.role_id, tb_user.id, tb_user.create_time, tb_user.update_time FROM tb_user) tmp) a ON tr.role_name = TO_BASE64(AES_ENCRYPT(a.phone, '测试秘钥')))